jQuery((function(e){e(".so-addon-banner").each((function(){var i=e(this);if(!i.find("img").length){var n=Trianglify({width:128,height:128,variance:1,cell_size:32,seed:i.data("seed")});i.append(n.svg())}})),e(".so-addon").each((function(){var n=e(this),a=n.data("id"),o=n.data("section");n.find(".so-addon-toggle-active button").on("click",(function(s){var t=e(this),d=parseInt(t.data("status"));t.prop("disabled",!0),e.post(e("#addons-list").data("action-url"),{id:a,section:o,status:d,activate_required:1},(function(o){if(t.prop("disabled",!1),d?(n.removeClass("so-addon-is-inactive").addClass("so-addon-is-active"),n.find(".so-addon-settings").show()):(n.removeClass("so-addon-is-active").addClass("so-addon-is-inactive"),n.find(".so-addon-settings").hide()),e("body").trigger("siteorigin_addon_status_changed",{id:a,status:d}),void 0!==o.action_links&&o.action_links.length){var s=n.find(".so-addon-links").empty();s.length||(s=e('<div class="so-addon-links"></div>').insertAfter(n.find(".so-addon-name"))),s.html(o.action_links.join(" | "))}if(void 0!==o.submenu_links&&o.submenu_links.length)for(i=0;i<o.submenu_links.length;++i)"enabled"==o.status?e(".toplevel_page_"+o.submenu_links[i].section+" .wp-submenu").append('<li><a href="'+o.submenu_links[i].link+'">'+o.submenu_links[i].label+"</li>"):e(".toplevel_page_"+o.submenu_links[i].section+' .wp-submenu li:contains("'+o.submenu_links[i].label+'")').remove();d&&"true"===n.attr("data-show-settings-on-activate")&&n.find(".so-addon-settings").trigger("click"),e(window).trigger("resize")}))}))})),e(".so-addon .so-addon-tags a").on("click",(function(i){i.preventDefault();var n=e(this);e(".addons-search").val(n.data("tag")),a(),setTimeout((function(){e(window).trigger("resize"),e(window).scrollTop(0)}),200)}));var n="";e(".page-sections a").on("click",(function(i){i.preventDefault(),e(".page-sections li").removeClass("active-section");var o=e(this);n=o.data("section"),o.parent("li").addClass("active-section"),a()}));var a=function(){var i=n;const a=e(".addons-search").val().toLowerCase();""===a?""===i?e(".so-addon-wrap").show():(e(".so-addon-wrap").hide(),e('.so-addon[data-section="'+n+'"]').parents().show()):e(".so-addon").each((function(){var n=e(this),o=n.find("h3").html()+" "+n.find(".so-addon-description").html();n.find(".so-addon-tags a").each((function(){o+=e(this).data("tag")+" "})),o.toLowerCase().indexOf(a)>-1&&(""===i||n.data("section")===i)?n.parent().show():n.parent().hide()})),e(window).trigger("resize")};a(),e(".addons-search").on({keyup:a,change:a,search:a}),e(window).on("resize",(function(){var i=e(".so-addon:visible").css("height","auto"),n=[],a=0;i.each((function(i){a=(a=i/3)<0?Math.ceil(a):Math.floor(a),e(this).data("column",a),n[a]=Math.max(void 0===n[a]?0:n[a],e(this).height())})),i.each((function(){e(this).css("height",n[e(this).data("column")]+"px")}))})).trigger("resize");var o=e("#siteorigin-premium-settings-dialog"),s=e("#addons-list .so-addon-settings");s.on("click",(function(i){var n=e(this);i.preventDefault();var a=o.find(".so-content");a.empty().addClass("so-loading"),e.get(n.data("form-url")).done((function(i){a.html(i),e("body").trigger("siteorigin_addon_settings_loaded",n)})).fail((function(i){a.html(soPremiumAddons.settingsForm.error),console.error(i)})).always((function(){a.removeClass("so-loading")})),o.show()})),o.find(".so-close").on("click",(function(i){i.preventDefault(),o.hide()})),o.find(".so-save").on("click",(function(i){if(i.preventDefault(),"undefined"!=typeof sowbForms&&"function"==typeof sowbForms.validateFields){var n=sowbForms.validateFields(o);if("boolean"==typeof n&&!n)return!1}const a=e(this);a.prop("disabled",!0),s.prop("disabled",!0);o.find("form").on("submit",(function(){a.prop("disabled",!1),o.hide(),e("body").trigger("siteorigin_addon_settings_saved",{id:a.data("id")})})).trigger("submit")})),e("#so-premium-addon-settings-save").on("load",(function(){e("#addons-list .so-addon-settings").prop("disabled",!1)}));var t=e(".modal-video");t.find(".modal-video-close-btn").addBack().on("click",(function(){var i=t.find("iframe.active").removeClass("active");i.length&&i.data("player").pause();t.hide()})),jQuery(document).on("keyup",(function(i){"Escape"===i.key&&(t.is(":visible")&&t.find(".modal-video-close-btn").trigger("click"),o.is(":visible")&&o.hide())})),e(".js-modal-video").each((function(){var i,n=e(this),a=n.data("video-id"),o="https://player.vimeo.com/video/"+a+"?autoplay=0";0===(i=e("iframe#video_"+a)).length&&(i=e("<iframe >").attr({id:"video_"+a,src:o,allow:"autoplay",allowfullscreen:"1"}).appendTo(t.find(".modal-video-movie-wrap")));var s=new Vimeo.Player(i);i.data("player",s),s.on("play",(function(){i.is(":visible")||s.pause()})),n.on("click",(function(){t.find("iframe").hide(),i.show().addClass("active"),t.show(),s.play()}))})),t.show().hide(),e(".installer-link").on("click",(function(i){i.preventDefault(),e(".installer-container").slideToggle("fast")})),e(".installer_status").on("change",(function(){var i=e(this);i.prop("disabled",!0),jQuery.post(ajaxurl,{action:"so_installer_status",nonce:i.data("nonce"),status:i.is(":checked")},(function(){i.prop("disabled",!1)}))}));const d=new URLSearchParams(window.location.search);if(d.has("addon")){let i;try{i=decodeURIComponent(d.get("addon"));const n=e('.so-addon[data-id="'+CSS.escape(i)+'"]');n.length&&n.find(".so-addon-settings").trigger("click")}catch(i){console.error("SiteOrigin Premium: Invalid URL parameter format for addon.")}}}));